import{d as k,R as d,S as b,U as j,r as y,V as T,o as F,W as V,X as B,Y as P,z as S,a as C,b as h,j as i,l as D,q as v,f as q,w as l,n as J,k as w,h as r,B as N,Z as M,M as W,E as $,N as x,v as z}from"./main-7e53c33c.js";/* empty css                */import{J as _}from"./jsoneditor.min-dbe4821a.js";const O=k({ControlType:"JsonEditor",nameCn:"JSON编辑",icon:"icon-json-full",rule:d.getJsonValidate(),formConfig:b("JsonEditor",[{fieldName:"default",component:"JsonEditor"}]),props:{...j},actionType:["onChange"],setup(e){const t=y({});let c=null,s=null;const u=y(),m=y();T(e);function f(){const o=t.value,n=e.data,a=e.item,g=a.data.fieldName,p={modes:["text","code","view"],mode:"code",search:!1,onChange(){n[g]=s?.getText()}};s=new _(o,p),e.drag?s?.set(d.tryParseJson(a.data.default)):s?.set(d.tryParseJson(n[a.data.fieldName]))}return F(()=>{f()}),V(()=>e.item,o=>{if(e.drag)s?.set(d.tryParseJson(o.data.default));else{const n=e.data,a=e.item;s?.set(d.tryParseJson(n[a.data.fieldName]))}}),{myDialog:m,jsoneditor:t,JsonViewerDialogDom:u,async showCustomDialog(){const o=m.value;o.show(),o.init("JSON编辑","icon-json-full"),await B();const n=u.value,a={modes:["text","code","view"],mode:"code",search:!1};c=new _(n,a),c?.set(d.tryParseJson(s.getText()))},closeDialog(){m.value.close()},saveJson(){s?.set(d.tryParseJson(c.getText()));const o=e.data,a=e.item.data.fieldName;o[a]=s?.getText(),m.value.close()}}}}),L={key:0,class:"item_require"},R={id:"jsoneditor",ref:"jsoneditor"},U={ref:"JsonViewerDialogDom",style:{height:"calc(100% - 24px)"}};function X(e,t,c,s,u,m){const f=M,o=W,n=$,a=x,g=z,p=S("CustomDialog");return C(),h("div",{class:J(["starfish-formitem",{formCover:e.drag,"starfish-vertical":e.labelalign!="top",[e.item.data.csslist?.join(" ")]:!!e.item.data.csslist}])},[i("div",{class:J(["label","label_"+e.labelalign]),style:w({width:e.labelWidth+"px"})},[i("label",null,D(e.item.data.label)+D(e.suffix),1),e.item.data.required?(C(),h("span",L,"*")):v("",!0),e.item.data.tip?(C(),q(f,{key:1,class:"item",effect:"dark",content:e.item.data.tip,placement:"top"},{default:l(()=>[...t[1]||(t[1]=[i("span",{class:"tip iconfontui icon-tishi"},null,-1)])]),_:1},8,["content"])):v("",!0)],6),i("div",{class:"control",style:w({marginLeft:e.labelalign!="top"?e.labelWidth+"px":""})},[i("div",R,[i("div",{class:"fullScreen",onClick:t[0]||(t[0]=(...E)=>e.showCustomDialog&&e.showCustomDialog(...E))},[...t[2]||(t[2]=[i("i",{class:"iconfontui icon-quanping"},null,-1)])])],512)],4),r(p,{ref:"myDialog",width:"60%"},{default:l(()=>[r(o,{style:{padding:"0"}},{default:l(()=>[r(g,{style:{height:"100%"}},{default:l(()=>[r(o,{class:"my-pageMain"},{default:l(()=>[i("div",U,null,512)]),_:1}),r(a,{class:"my-Footer",style:{height:"60px","padding-top":"10px","text-align":"right"}},{default:l(()=>[r(n,{type:"primary",onClick:e.saveJson},{default:l(()=>[...t[3]||(t[3]=[N("保存",-1)])]),_:1},8,["onClick"]),r(n,{onClick:e.closeDialog},{default:l(()=>[...t[4]||(t[4]=[N("关闭",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},512)],2)}const G=P(O,[["render",X]]);export{G as default};
